namespace = pdengine
#This event sets a flag at game start
event = {
	id = pdengine.00
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = { set_global_flag = planetarydiversity }
}

###These events fire at game start, changing all classes to PD classes, and changing starting classes to normal classes
#This event changes all non homeworld, non prescripted to PD classes, Non ideal
country_event = {
	id = pdengine.10
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		#Continental
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_continental 
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_continental }	 
				}    
				25 = { 
					pd_retinal_world_effect = yes
				}
				25 = { 
					pd_lake_world_effect = yes
				}
				25 = { 
					pd_forest_world_effect = yes
				}
				25 = { 
					pd_temperate_world_effect = yes
				}
				25 = { 
					pd_tepid_world_effect = yes
				}  
				25 = { 
					pd_mushroom_world_effect = yes
				}  
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_megaflora_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_petrified_world_effect = yes
				}                    
			}
        }
		#Ocean
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_ocean 
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
					has_planet_flag = living_planet 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_ocean }	 
				}    
				25 = { 
					pd_cascadian_world_effect = yes
				}
				25 = { 
					pd_swamp_world_effect = yes
				}
				25 = { 
					pd_crag_world_effect = yes
				}
				25 = { 
					pd_fog_world_effect = yes
				} 
				25 = { 
					pd_kelp_world_effect = yes
				} 
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_reef_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_archipelago_world_effect = yes
				}                      
			}
        }
		#Tropical
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_tropical 
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_tropical }	 
				}    
				25 = { 
					pd_atoll_world_effect = yes
				}
				25 = { 
					pd_tepui_world_effect = yes
				}
				25 = { 
					pd_mangrove_world_effect = yes
				}
				25 = { 
					pd_cenote_world_effect = yes
				} 
				25 = { 
					pd_fungal_world_effect = yes
				}
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_geothermal_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_biolumen_world_effect = yes
				}                      
			}
        }
		#Desert
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_desert
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_desert }	 
				}    
				25 = { 
					pd_dune_world_effect = yes
				}
				25 = { 
					pd_oasis_world_effect = yes
				}
				25 = { 
					pd_outback_world_effect = yes
				}
				25 = { 
					pd_coastal_world_effect = yes
				} 
				25 = { 
					pd_fungi_world_effect = yes
				}
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_salt_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_aquifer_world_effect = yes
				}                      
			}
        }
		#Arid
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_arid
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_arid }	 
				}    
				25 = { 
					pd_mesa_world_effect = yes
				}
				25 = { 
					pd_fog_desert_world_effect = yes
				}
				25 = { 
					pd_mediterranean_world_effect = yes
				}
				25 = { 
					pd_badlands_world_effect = yes
				} 
				25 = { 
					pd_succulent_world_effect = yes
				}
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_coral_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_primal_world_effect = yes
				}                      
			}
        }
		#Savannah
        every_galaxy_planet = {                 
            limit = { 
				is_planet_class = pc_savannah
				is_homeworld = no 
				NOR = { 
					has_planet_flag = pd_ignore 
					has_planet_flag = planet_earth 
				}
			}	
			random_list = {
				25 = {
					add_modifier = { modifier = pd_savannah }	 
				}    
				25 = { 
					pd_steppe_world_effect = yes
				}
				25 = { 
					pd_prairie_world_effect = yes
				}
				25 = { 
					pd_veld_world_effect = yes
				}
				25 = { 
					pd_semi_arid_world_effect = yes
				} 
				25 = { 
					pd_aspen_world_effect = yes
				}
				25 = { 
					modifier = {
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_supercontinent_world_effect = yes
				}
				25 = { 
					modifier = { 
						factor = 0
						has_planet_flag = prescripted_ideal 
					}
					pd_sinkhole_world_effect = yes
				}                      
			}
        }
	}
}
#This Event Changes any planets that slipped through, and any non homeworld planets
country_event = {
	id = pdengine.11
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		#Continental Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_continental = yes
				has_pd_modifier = no
				is_homeworld = no 
			} 
			change_pc = pc_continental
			random_list = {
				25 = {
					add_modifier = { modifier = pd_continental }	 
				}    
				25 = { 
					pd_retinal_world_effect = yes
				}
				25 = { 
					pd_lake_world_effect = yes
				}
				25 = { 
					pd_forest_world_effect = yes
				}
				25 = { 
					pd_temperate_world_effect = yes
				}
				25 = { 
					pd_tepid_world_effect = yes
				}  
				25 = { 
					pd_mushroom_world_effect = yes
				}  
			}
		}
		#Ocean Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_ocean = yes
				has_pd_modifier = no
				is_homeworld = no 
				NOT = { has_planet_flag = living_planet }
			} 
			change_pc = pc_ocean
			random_list = {
				25 = {
					add_modifier = { modifier = pd_ocean }	 
				}    
				25 = { 
					pd_cascadian_world_effect = yes
				}
				25 = { 
					pd_swamp_world_effect = yes
				}
				25 = { 
					pd_crag_world_effect = yes
				}
				25 = { 
					pd_fog_world_effect = yes
				} 
				25 = { 
					pd_kelp_world_effect = yes
				} 
			}
		}
		#Tropical Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_ocean = yes
				has_pd_modifier = no
				is_homeworld = no 
			} 
			change_pc = pc_tropical
			random_list = {
				25 = {
					add_modifier = { modifier = pd_tropical }	 
				}    
				25 = { 
					pd_atoll_world_effect = yes
				}
				25 = { 
					pd_tepui_world_effect = yes
				}
				25 = { 
					pd_mangrove_world_effect = yes
				}
				25 = { 
					pd_cenote_world_effect = yes
				} 
				25 = { 
					pd_fungal_world_effect = yes
				}
			}
		}
		#Desert Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_desert = yes
				has_pd_modifier = no
				is_homeworld = no 
			} 
			change_pc = pc_desert
			random_list = {
				25 = {
					add_modifier = { modifier = pd_desert }	 
				}    
				25 = { 
					pd_dune_world_effect = yes
				}
				25 = { 
					pd_oasis_world_effect = yes
				}
				25 = { 
					pd_outback_world_effect = yes
				}
				25 = { 
					pd_coastal_world_effect = yes
				} 
				25 = { 
					pd_fungi_world_effect = yes
				}
			}
		}
		#Arid Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_arid = yes
				has_pd_modifier = no
				is_homeworld = no 
			} 
			change_pc = pc_arid
			random_list = {
				25 = {
					add_modifier = { modifier = pd_arid }	 
				}    
				25 = { 
					pd_mesa_world_effect = yes
				}
				25 = { 
					pd_fog_desert_world_effect = yes
				}
				25 = { 
					pd_mediterranean_world_effect = yes
				}
				25 = { 
					pd_badlands_world_effect = yes
				} 
				25 = { 
					pd_succulent_world_effect = yes
				}
			}
		}
		#Savannah Planets
		every_galaxy_planet = {         
			limit = {
				is_pd_savannah = yes
				has_pd_modifier = no
				is_homeworld = no 
			} 
			change_pc = pc_savannah
			random_list = {
				25 = {
					add_modifier = { modifier = pd_savannah }	 
				}    
				25 = { 
					pd_steppe_world_effect = yes
				}
				25 = { 
					pd_prairie_world_effect = yes
				}
				25 = { 
					pd_veld_world_effect = yes
				}
				25 = { 
					pd_semi_arid_world_effect = yes
				} 
				25 = { 
					pd_aspen_world_effect = yes
				}
			}
		}
	}
}
#This Event Changes any homeworlds back into normal classes after game start
country_event = {
	id = pdengine.12
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		#Continental Planets
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_continental
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_continental }
				}
				add_modifier = { modifier = pd_continental }
			}  
		}
        every_galaxy_planet = {         
            limit = {
                is_planet_class = pc_pd_retinal
                has_pd_modifier = no
                is_homeworld = yes 
            }   
            change_pc = pc_continental          
            pd_retinal_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
        }
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_lake
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_continental         
			pd_lake_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_tepid
				has_pd_modifier = no
				is_homeworld = yes 
			}      
			change_pc = pc_continental     
			pd_tepid_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_mushroom
				has_pd_modifier = no
				is_homeworld = yes 
			}      
			change_pc = pc_continental   
			pd_mushroom_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_temperate
				has_pd_modifier = no
				is_homeworld = yes 
			}     
			change_pc = pc_continental      
			pd_temperate_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_forest
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_continental         
			pd_forest_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_megaflora
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_continental         
			pd_megaflora_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_petrified
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_continental         
			pd_petrified_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		#Ocean Worlds
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_ocean
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_ocean }
				}
				add_modifier = { modifier = pd_ocean }
			}  
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_cascadian
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_cascadian_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_swamp
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_swamp_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_crag
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_crag_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_fog
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_fog_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_kelp
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_kelp_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_reef
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_reef_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_archipelago
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_ocean         
			pd_archipelago_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		#Tropical Worlds
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_tropical
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_tropical }
				}
				add_modifier = { modifier = pd_tropical }
			}  
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_atoll
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_atoll_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_tepui
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_tepui_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_mangrove
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_mangrove_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_cenote
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_cenote_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_fungal
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_fungal_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_geothermal
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_geothermal_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_biolumen
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_tropical         
			pd_biolumen_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		#Desert
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_desert
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_desert }
				}
				add_modifier = { modifier = pd_desert }
			}  
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_dune
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert         
			pd_dune_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_oasis
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert         
			pd_oasis_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_outback
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert      
			pd_outback_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_coastal
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert      
			pd_coastal_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_fungi
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert      
			pd_fungi_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_salt
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert      
			pd_salt_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_aquifer
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_desert      
			pd_aquifer_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		#Arid
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_arid
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_arid }
				}
				add_modifier = { modifier = pd_arid }
			}  
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_mesa
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_mesa_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_fog_desert
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_fog_desert_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_mediterranean
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_mediterranean_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_badlands
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_badlands_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_succulent
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_succulent_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_coral
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_coral_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_primal
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_arid         
			pd_primal_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		#Savannah
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_savannah
				has_pd_modifier = no
				is_homeworld = yes 
				NOT = { has_planet_flag = prescripted_ideal }
			} 
			IF = {
				limit = {
					NOT = { has_modifier = pd_savannah }
				}
				add_modifier = { modifier = pd_savannah }
			}  
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_steppe
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah        
			pd_steppe_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_prairie
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_prairie_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_veld
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_veld_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_semi_arid
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_semi_arid_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_aspen
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_aspen_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_supercontinent
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_supercontinent_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
		every_galaxy_planet = {         
			limit = {
				is_planet_class = pc_pd_sinkhole
				has_pd_modifier = no
				is_homeworld = yes 
			}  
			change_pc = pc_savannah         
			pd_sinkhole_world_effect = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
	}
}
#This Event Changes any other traits, but with other homeworlds (relic, tomb etc)
country_event = {
	id = pdengine.13
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		#Continental
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_retinal_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_retinal_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_lake_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_lake_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_tepid_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_tepid_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_mushroom_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_mushroom_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_temperate_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_temperate_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_forest_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_forest_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_megaflora_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_megaflora_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_petrified_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_petrified_preference
					add_trait = trait_pc_continental_preference
				}
			}
		}
		#Ocean
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_cascadian_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_cascadian_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_swamp_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_swamp_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_crag_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_crag_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_mushroom_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_mushroom_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_fog_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_fog_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_kelp_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_kelp_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_reef_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_reef_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_archipelago_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_archipelago_preference
					add_trait = trait_pc_ocean_preference
				}
			}
		}
		#Tropical
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_atoll_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_atoll_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_tepui_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_tepui_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_mangrove_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_mangrove_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_cenote_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_cenote_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_fungal_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_fungal_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_geothermal_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_geothermal_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_biolumen_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_biolumen_preference
					add_trait = trait_pc_tropical_preference
				}
			}
		}
		#Desert
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_dune_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_dune_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_oasis_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_oasis_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_outback_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_outback_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_coastal_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_coastal_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_fungi_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_fungi_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_salt_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_salt_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_aquifer_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_aquifer_preference
					add_trait = trait_pc_desert_preference
				}
			}
		}
		#Arid
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_mesa_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_mesa_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_fog_desert_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_fog_desert_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_mediterranean_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_mediterranean_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_badlands_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_badlands_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_succulent_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_succulent_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_coral_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_coral_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_primal_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_primal_preference
					add_trait = trait_pc_arid_preference
				}
			}
		}
		#Savannah
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_steppe_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_steppe_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_prairie_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_prairie_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_veld_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_veld_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_semi_arid_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_semi_arid_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_aspen_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_aspen_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_supercontinent_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_supercontinent_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
		IF = {
			limit = {
				any_owned_species = {
					has_trait =	trait_pc_pd_sinkhole_preference
				}
			}
			every_owned_species = {	
				change_species_characteristics = {
					remove_trait = trait_pc_pd_sinkhole_preference
					add_trait = trait_pc_savannah_preference
				}
			}
		}
	}
}

###These are the Terraforming Events
#This Event Fires After Terraforming to let you choose PD classes
#Has Planet Flag = pd_choose_every_planet_terraforming
planet_event = {
	id = pdengine.20
	hide_window = yes
	location = root
	is_triggered_only = yes

	trigger = {
		exists = space_owner
		space_owner = {
			OR = {
				has_policy_flag = pd_choose_every_planet_terraforming
				has_country_flag = pd_choose_every_planet_terraforming
			}
		}
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_ocean
			is_planet_class = pc_tropical
			is_planet_class = pc_desert
			is_planet_class = pc_arid
			is_planet_class = pc_savannah
		}
	}

	immediate = {
		space_owner = { 
			country_event = { id = pdengine.21 } 
		}
	}
}
country_event = {
	id = pdengine.21
	title = pdengine.21.name
	desc = pdengine.21.desc
	picture = GFX_evt_shattered_planet
	show_sound = event_ship_bridge
	location = root
	is_triggered_only = yes

	immediate = {
		remove_pd_modifier = yes
	}

	#Continental
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.continental
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_continental }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.retinal
		hidden_effect = {   
			from = {       
				pd_retinal_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.lake
		hidden_effect = {      
			from = {       
				pd_lake_world_effect = yes
			}    
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.forest
		hidden_effect = {   
			from = {       
				pd_forest_world_effect = yes
			}       
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.tepid
		hidden_effect = {   
			from = {       
				pd_tepid_world_effect = yes
			}       
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.mushroom
		hidden_effect = {   
			from = {       
				pd_mushroom_world_effect = yes
			}       
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
		}
		name = pdengine.21.temperate
		hidden_effect = {  
			from = {       
				pd_temperate_world_effect = yes
			}        
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
			space_owner = {
				has_ascension_perk = ap_world_shaper
			}
		}
		name = pdengine.21.megaflora
		hidden_effect = {   
			from = {       
				pd_megaflora_world_effect = yes
			}       
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_continental }
			space_owner = {
				has_ascension_perk = ap_world_shaper
			}
		}
		name = pdengine.21.petrified
		hidden_effect = {   
			from = {       
				pd_petrified_world_effect = yes
			}       
		}
	}
	#Ocean
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.ocean
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_ocean }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.cascadian
		hidden_effect = {   
			from = {       
				pd_cascadian_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.swamp
		hidden_effect = {   
			from = {       
				pd_swamp_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.crag
		hidden_effect = {   
			from = {       
				pd_crag_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.fog
		hidden_effect = {   
			from = {       
				pd_fog_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
		}
		name = pdengine.21.kelp
		hidden_effect = {   
			from = {       
				pd_kelp_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
			space_owner = {
				has_ascension_perk = ap_world_shaper
			}
		}
		name = pdengine.21.reef
		hidden_effect = {   
			from = {       
				pd_reef_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_ocean }
			space_owner = {
				has_ascension_perk = ap_world_shaper
			}
		}
		name = pdengine.21.archipelago
		hidden_effect = {   
			from = {       
				pd_archipelago_world_effect = yes
			}
		}
	}
	#Tropical
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.tropical
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_tropical }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.atoll
		hidden_effect = {   
			from = {       
				pd_atoll_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.tepui
		hidden_effect = {   
			from = {       
				pd_tepui_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.mangrove
		hidden_effect = {   
			from = {       
				pd_mangrove_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.cenote
		hidden_effect = {   
			from = {       
				pd_cenote_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.fungal
		hidden_effect = {   
			from = {       
				pd_fungal_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.geothermal
		hidden_effect = {   
			from = {       
				pd_geothermal_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_tropical }
		}
		name = pdengine.21.biolumen
		hidden_effect = {   
			from = {       
				pd_biolumen_world_effect = yes
			}
		}
	}
	#Desert
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.desert
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_desert }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.dune
		hidden_effect = {   
			from = {       
				pd_dune_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.oasis
		hidden_effect = {   
			from = {       
				pd_oasis_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.outback
		hidden_effect = {   
			from = {       
				pd_outback_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.coastal
		hidden_effect = {   
			from = {       
				pd_coastal_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.fungi
		hidden_effect = {   
			from = {       
				pd_fungi_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.salt
		hidden_effect = {   
			from = {       
				pd_salt_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_desert }
		}
		name = pdengine.21.aquifer
		hidden_effect = {   
			from = {       
				pd_aquifer_world_effect = yes
			}
		}
	}
	#Arid
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.arid
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_arid }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.mesa
		hidden_effect = {   
			from = {       
				pd_mesa_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.fog_desert
		hidden_effect = {   
			from = {       
				pd_fog_desert_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.mediterranean
		hidden_effect = {   
			from = {       
				pd_mediterranean_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.badlands
		hidden_effect = {   
			from = {       
				pd_badlands_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.succulent
		hidden_effect = {   
			from = {       
				pd_succulent_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.coral
		hidden_effect = {   
			from = {       
				pd_coral_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_arid }
		}
		name = pdengine.21.primal
		hidden_effect = {   
			from = {       
				pd_primal_world_effect = yes
			}
		}
	}
	#Savannah
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.savannah
		hidden_effect = {
			from = { 
				add_modifier = { modifier = pd_savannah }
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.steppe
		hidden_effect = {   
			from = {       
				pd_steppe_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.prairie
		hidden_effect = {   
			from = {       
				pd_prairie_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.veld
		hidden_effect = {   
			from = {       
				pd_veld_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.semi_arid
		hidden_effect = {   
			from = {       
				pd_semi_arid_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.aspen
		hidden_effect = {   
			from = {       
				pd_aspen_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.supercontinent
		hidden_effect = {   
			from = {       
				pd_supercontinent_world_effect = yes
			}
		}
	}
	option = {
		trigger = {
			from = { is_planet_class = pc_savannah }
		}
		name = pdengine.21.sinkhole
		hidden_effect = {   
			from = {       
				pd_sinkhole_world_effect = yes
			}
		}
	}
}

#This Event Fires After Terraforming and fires a random class
#Has Planet Flag = pd_random_same_class_terraforming
planet_event = {
	id = pdengine.22
	hide_window = yes
	location = root
	is_triggered_only = yes

	trigger = {
		exists = space_owner
		space_owner = {
			OR = {
				has_policy_flag = pd_random_same_class_terraforming
				has_country_flag = pd_random_same_class_terraforming
			}
		}
		can_have_habitable_deposits = yes
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_ocean
			is_planet_class = pc_tropical
			is_planet_class = pc_desert
			is_planet_class = pc_arid
			is_planet_class = pc_savannah
			is_planet_class = pc_arctic
			is_planet_class = pc_tundra
			is_planet_class = pc_alpine
		}
	}

	immediate = {
		remove_pd_modifier = yes
		IF = {
			limit = { 
				is_planet_class = pc_continental
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_continental }	 
				}    
				25 = { 
					pd_retinal_world_effect = yes
				}
				25 = { 
					pd_lake_world_effect = yes
				}
				25 = { 
					pd_forest_world_effect = yes
				}
				25 = { 
					pd_temperate_world_effect = yes
				}
				25 = { 
					pd_tepid_world_effect = yes
				}  
				25 = { 
					pd_mushroom_world_effect = yes
				}  
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_megaflora_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_petrified_world_effect = yes
				}                    
			}
		}
		IF = {
			limit = { 
				is_planet_class = pc_ocean
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_ocean }	 
				}    
				25 = { 
					pd_cascadian_world_effect = yes
				}
				25 = { 
					pd_swamp_world_effect = yes
				}
				25 = { 
					pd_crag_world_effect = yes
				}
				25 = { 
					pd_fog_world_effect = yes
				}
				25 = { 
					pd_kelp_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_reef_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_archipelago_world_effect = yes
				}                    
			}
		}
		IF = {
			limit = { 
				is_planet_class = pc_tropical
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_tropical }	 
				}    
				25 = { 
					pd_atoll_world_effect = yes
				}
				25 = { 
					pd_tepui_world_effect = yes
				}
				25 = { 
					pd_mangrove_world_effect = yes
				}
				25 = { 
					pd_cenote_world_effect = yes
				}
				25 = { 
					pd_fungal_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_geothermal_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_biolumen_world_effect = yes
				}                    
			}
		}
		IF = {
			limit = { 
				is_planet_class = pc_desert
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_desert }	 
				}    
				25 = { 
					pd_dune_world_effect = yes
				}
				25 = { 
					pd_oasis_world_effect = yes
				}
				25 = { 
					pd_outback_world_effect = yes
				}
				25 = { 
					pd_coastal_world_effect = yes
				}
				25 = { 
					pd_fungi_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_salt_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_salt_world_effect = yes
				}                    
			}
		}
		IF = {
			limit = { 
				is_planet_class = pc_arid
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_arid }	 
				}    
				25 = { 
					pd_mesa_world_effect = yes
				}
				25 = { 
					pd_fog_desert_world_effect = yes
				}
				25 = { 
					pd_mediterranean_world_effect = yes
				}
				25 = { 
					pd_badlands_world_effect = yes
				}
				25 = { 
					pd_succulent_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_coral_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_primal_world_effect = yes
				}                    
			}
		}
		IF = {
			limit = { 
				is_planet_class = pc_savannah
			}
			random_list = {
				25 = {
					add_modifier = { modifier = pd_savannah }	 
				}    
				25 = { 
					pd_steppe_world_effect = yes
				}
				25 = { 
					pd_prairie_world_effect = yes
				}
				25 = { 
					pd_veld_world_effect = yes
				}
				25 = { 
					pd_semi_arid_world_effect = yes
				}
				25 = { 
					pd_aspen_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_supercontinent_world_effect = yes
				}
				0 = { 
					modifier = {
						add = 25
						space_owner = {
							has_ascension_perk = ap_world_shaper
						}
					}
					pd_sinkhole_world_effect = yes
				}                    
			}
		}
	}
}