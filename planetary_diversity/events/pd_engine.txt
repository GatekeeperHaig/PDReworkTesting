namespace = pdengine

event = {
	id = pdengine.00
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = { set_global_flag = planetarydiversity }
}

country_event = {
	id = pdengine.01
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	#Continental
	immediate = {

		#Wet Planets
		every_galaxy_planet = {                 
            limit = { is_planet_class = pc_continental system_star = { OR = { is_star_class = sc_k is_star_class = sc_trinary_3 is_star_class = sc_binary_7 } } is_homeworld = no is_moon = no NOR = { has_planet_flag = prescripted_ideal has_planet_flag = pd_ignore has_planet_flag = planet_earth solar_system = { has_star_flag = empire_cluster } solar_system = { has_star_flag = empire_home_system } solar_system = { has_star_flag = sol_system } solar_system = { has_star_flag = sol } } } #TODO 80/20, no 0/100
            change_pc = pc_superhabitable 
			reroll_planet = yes 
			clear_planet_modifiers = yes
			random_list = {
				20 = { set_planet_size = 31 }
				20 = { set_planet_size = 32 }
				20 = { set_planet_size = 33 }
				20 = { set_planet_size = 34 }
				20 = { set_planet_size = 35 }
			}
        }
        every_galaxy_planet = {                 
            limit = { is_planet_class = pc_continental is_homeworld = no NOR = { has_planet_flag = prescripted_ideal has_planet_flag = pd_ignore has_planet_flag = planet_earth solar_system = { has_star_flag = empire_cluster } solar_system = { has_star_flag = empire_home_system } solar_system = { has_star_flag = sol_system } solar_system = { has_star_flag = sol } } }
            random_list = {
                20 = { }    
                20 = { change_pc = pc_retinal reroll_planet = yes }
                20 = { change_pc = pc_forest reroll_planet = yes }        
                20 = { change_pc = pc_lake reroll_planet = yes }    
                20 = { change_pc = pc_tepid reroll_planet = yes }    
                20 = { change_pc = pc_megaflora reroll_planet = yes clear_planet_modifiers = yes add_modifier = { modifier = pdmegaflora } }  
                20 = { change_pc = pc_pd_petrified reroll_planet = yes clear_planet_modifiers = yes add_modifier = { modifier = pdpetrified } }                       
            }
        }
	}
}